# Cursor IDE 高级配置指南

本指南介绍如何为 Cursor IDE 配置项目级别的规则，让所有 AI Agent 遵循统一的编码标准和项目约定。

## 📋 配置方式概览

Cursor 支持三种配置方式（按优先级从高到低）：

1. **`.cursor/rules/` 目录**（推荐）- 支持多个规则文件，便于组织
2. **`.cursorrules` 文件** - 项目根目录下的单文件配置
3. **`AGENTS.md` 文件** - 项目根目录下的简化配置

## 🎯 方式一：`.cursor/rules/` 目录（推荐）

### 创建步骤

1. 在项目根目录创建 `.cursor/rules/` 目录
2. 在该目录下创建 `.md` 文件，每个文件定义一组相关规则

### 示例结构

```
molmo_hf/
├── .cursor/
│   └── rules/
│       ├── coding-standards.md      # 编码标准
│       ├── project-conventions.md   # 项目约定
│       ├── ai-behavior.md          # AI Agent 行为规范
│       └── testing-requirements.md # 测试要求
```

### 优势

- ✅ 规则模块化，易于维护
- ✅ 支持多个规则文件
- ✅ 便于团队协作和版本控制

## 📝 方式二：`.cursorrules` 文件

在项目根目录创建 `.cursorrules` 文件，所有规则写在一个文件中。

**优点**：简单直接，适合小型项目  
**缺点**：规则多了之后不易维护

## 🔧 方式三：`AGENTS.md` 文件

在项目根目录创建 `AGENTS.md` 文件，作为 `.cursor/rules/` 的简化替代。

**适用场景**：规则较少，希望配置更简洁

## 📚 规则文件编写指南

### 规则文件格式

规则文件使用 Markdown 格式，支持：

- **标题层级**：使用 `#`, `##`, `###` 组织规则
- **列表**：使用 `-` 或 `*` 列出规则项
- **代码块**：使用 ` ``` ` 展示代码示例
- **强调**：使用 `**粗体**` 或 `*斜体*` 突出重点

### 规则内容建议

1. **编码标准**
   - 命名约定（变量、函数、类）
   - 代码风格（缩进、行长度等）
   - 注释规范

2. **项目约定**
   - 文件组织结构
   - 导入顺序
   - 依赖管理

3. **AI Agent 行为**
   - 代码生成偏好
   - 重构策略
   - 错误处理方式

4. **测试要求**
   - 测试覆盖率
   - 测试文件命名
   - 测试编写规范

## 🎨 示例规则文件

### 示例 1：编码标准 (`coding-standards.md`)

```markdown
# 编码标准

## Python 代码规范

- 遵循 PEP 8 代码风格
- 使用 4 个空格缩进，不使用 Tab
- 行长度限制为 100 字符
- 函数和类名使用 `snake_case`，类名首字母大写
- 常量使用 `UPPER_SNAKE_CASE`

## 命名约定

- 变量名：`snake_case`
- 函数名：`snake_case`
- 类名：`PascalCase`
- 私有方法：`_leading_underscore`
- 常量：`UPPER_SNAKE_CASE`

## 注释规范

- 所有公共函数和类必须有 docstring
- 使用 Google 风格的 docstring
- 复杂逻辑必须添加行内注释
```

### 示例 2：项目约定 (`project-conventions.md`)

```markdown
# 项目约定

## 文件组织

- 实验脚本放在 `experiments/` 目录
- 配置文件放在 `configs/` 目录
- 文档放在 `docs/` 目录
- 测试文件放在 `tests/` 目录，与源码结构对应

## 导入顺序

1. 标准库导入
2. 第三方库导入
3. 本地应用/库导入

每组导入之间用空行分隔。

## 依赖管理

- 新依赖必须添加到 `requirements.txt` 或 `setup.py`
- 使用 `pip install -e ".[experiments]"` 安装开发依赖
- 不要提交 `__pycache__` 或 `.pyc` 文件
```

### 示例 3：AI Agent 行为 (`ai-behavior.md`)

```markdown
# AI Agent 行为规范

## 代码生成原则

- 生成代码前必须理解现有代码结构
- 遵循项目的编码标准和约定
- 优先使用项目中已有的工具函数和类
- 不要重复实现已有功能

## 代码修改策略

- 修改代码前先阅读相关文件
- 保持代码风格一致性
- 修改函数时检查所有调用点
- 重大修改前先搜索相关代码

## 错误处理

- 使用有意义的错误消息
- 记录错误上下文信息
- 对于可能失败的操作，提供回退方案

## 文档要求

- 新功能必须更新相关文档
- 复杂逻辑必须添加注释
- API 变更必须更新文档
```

## 🔍 全局用户规则（可选）

除了项目级别的规则，Cursor 还支持在设置中配置全局用户规则，这些规则会应用到所有项目。

**设置路径**：Cursor Settings → Rules for AI

## ✅ 最佳实践

1. **从简单开始**：先创建基本的编码标准规则
2. **逐步完善**：根据项目需要逐步添加规则
3. **定期更新**：随着项目发展更新规则
4. **团队协作**：规则文件应该纳入版本控制
5. **明确具体**：规则要具体明确，避免模糊表述

## 🚀 快速开始

1. 创建 `.cursor/rules/` 目录
2. 复制本指南中的示例规则文件
3. 根据项目需求修改规则
4. 测试规则是否生效（让 AI 生成代码，观察是否符合规则）

## 📖 更多资源

- [Cursor 官方文档](https://cursor.sh/docs)
- [Cursor Rules 社区示例](https://github.com/cursor-sh/cursor-rules)

